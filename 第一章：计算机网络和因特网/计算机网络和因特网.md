# 计算机网络和因特网

## 1.1 什么是因特网

相关术语:

- 主机/端系统
- 分组
- isp: 每个 isp 网络都是独立管理的
- 协议: 两个/多个通信实体之间对于数据如何交换所约定的操作/方式
  1. 控制网络信息接受和发送
  2. 传输控制协议/网际协议
- 分布式应用
- 套接字接口: 端到端如何传输信息(偏向于端系统)

## 1.2 网络边缘

相关术语:

- 接入网、边缘路由器

## 1.3 网络核心

### 1.3.1 分组传输

- 存储转发传输

将一个大数据分组后，通过路由器传递给另一个主机，路由器会临时存储第一组先发过来的数据，等到第一组传输完成之后再整体发送到下一个节点。

N 条速率均为 R 的路径，P 个分组，每个分组数据大小为 L：

端到端时延 = (N + P - 1) \* (L / R)

- 排队时延和分组丢失

每个交换机有一个输出缓存，当下一条链路仍有数据传输时，会保存当前分组（一个 queue，排队时延），若缓存爆了，则会丢失一个分组。

- 转发表和路由选择协议

每个分组的首部都包含了目的的 ip 地址，类似于问路，到达每一个路由后根据目的地址来选择合适的路由进行转发，还根据路由转发表。

路由选择协议可以自动配置转发表。

### 1.3.2 电路交换

端到端实时通信，需要预留“线路”。

实时性、稳定性。

- 电路交换网络中的复用

电路实现：频分复用、时分复用

带宽：频段的宽度

- 以后的趋势是分组交换

### 1.3.3 网络中的网络

就是今天的因特网。

## 1.4 分组交换中的时延、丢包和吞吐量

### 1.4.1 分组交换网中的时延

- 处理时延：检查分组首部、将分组导向何处、检查比特级差错的时间

- 排队时延：分组在链路上等待传输（还是在路由器内存储）的时间

- 传输时延：路由器把一个分组“推”到链路上所需的时间

- 传播时延：分组在两个路由器之间，即链路上传播的时间

总时延时将他们全部相加。

处理时延对路由器的最大吞吐量有重要影响，吞吐量是路由器能够转发分组的最大速率。

### 1.4.2 排队时延和丢包

令 a 表示分组到达队列的平均速率，R 为传输速率，每个分组为 L bit，则比特到达队列的平均速率为 La bps。

流量强度：La/R, La/R 不能大于 1，平均排队时延与流量强度的函数关系为指数函数

如果队列已满，则会丢弃新的分组，称为丢包。

丢弃的分组会重传，丢包率也是衡量节点的性能之一

### 1.4.3 端到端时延

即从源主机到目的主机所经历的时间。

时延除了路由器之间的外，还有其他的，如应用程序之间、调制解调器等。

软件：Traceroute：查看端到端的路由

### 1.4.4 计算机网站中的吞吐量

服务器======Rs=======路由器=======Rc=========客户端

吞吐量 = min(Rs, Rc)

一般来说，取决于链路和路由器之间最小的传输速率，还取决于干扰流量。

## 1.5 协议层次及其服务模型

### 1.5.1 分层的体系结构

网络是分层的

每层会为它的上一层提供服务

各层的所有协议被称为协议栈

- 应用层:

1. http、smtp、ftp 协议
2. 应用层的信息分组称为报文

- 运输层：

1. 有连接服务的 tcp 协议，无连接服务的 udp 协议
2. 运输层的分组称为报文段

- 网络层:

1. IP 协议, 路由选择协议等
2. 网络层的分组称为数据报

- 链路层:

1. 以太网, wifi 和电缆接入网的 DOCSIS 协议
2. 链路层的分组称为帧

- 物理层: 透明地传输比特流

### 1.5.2 封装

下一层会给上一层传递过来的有效信息加上加上该层的附加信息(首部信息)

即一个分组有两种类型的字段: 首部字段和有效载荷字段, 有效载荷来自上一层的分组

## 1.6 面对攻击的网络

1. 经过因特网将有害程序植入计算机中
2. 攻击服务器和网络基础设施
3. 嗅探分组
4. 伪装成信任的人, 如 IP 哄骗

在相互信任的用户之间的通信是一种例外, 而不是规则
